{"version":3,"sources":["node_modules/tslib/tslib.es6.js","node_modules/hey-listen/dist/hey-listen.es.js","../../../.nvm/versions/node/v8.9.1/lib/node_modules/parcel-bundler/node_modules/process/browser.js","node_modules/framesync/dist/framesync.es.js","node_modules/style-value-types/dist/style-value-types.es.js","node_modules/@popmotion/easing/dist/easing.es.js","node_modules/stylefire/dist/stylefire.es.js","node_modules/popmotion/dist/popmotion.es.js","animation.js"],"names":["__extends","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","e","indexOf","getOwnPropertySymbols","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","m","exports","o","ar","error","concat","asyncIterator","q","a","resume","settle","fulfill","shift","cooked","raw","mod","__esModule","k","default","HEY_LISTEN","warning","invariant","check","message","console","warn","Error","toUpperCase","process","module","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","nextTick","args","Item","array","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","prevTime","onNextFrame","window","requestAnimationFrame","undefined","callback","timestamp","Date","now","timeToCall","Math","max","createStep","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing","cancelled","WeakSet","toKeepAlive","renderStep","cancel","indexOfCallback","add","splice","frame","_a","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","StepId","maxElapsed","defaultElapsed","useDefaultElapsed","willRunNextFrame","delta","stepsOrder","Read","Update","Render","PostRender","setWillRunNextFrame","willRun","reduce","acc","sync","startLoop","cancelSync","steps","processStep","stepId","processFrame","min","forEach","getFrameData","clamp","isFirstChars","term","getValueFromFunctionString","substring","lastIndexOf","splitCommaDelimited","split","sanitize","Number","toFixed","number","test","parse","parseFloat","transform","alpha","scale","createUnitType","unit","endsWith","degrees","percent","px","vh","vw","clampRgbUnit","onlyColorRegex","isRgba","red","isHsla","hue","splitColorValues","terms","numTerms","values","valuesArray","rgbaTemplate","green","blue","_b","alpha$$1","hslaTemplate","saturation","lightness","rgbUnit","round","testRgbaString","rgba","testHslaString","hsla","hex","substr","parseInt","color","floatRegex","colorRegex","COLOR_TOKEN","NUMBER_TOKEN","complex","isNaN","numValues","foundNumbers","match","foundColors","input","parsed","replace","map","createTransformer","prop","template","token","numColors","numNumbers","output","DEFAULT_OVERSHOOT_STRENGTH","reversed","easing","mirrored","createReversedEasing","createMirroredEasing","createExpoIn","power","pow","createBackIn","createAnticipateEasing","backEasing","linear","easeIn","easeOut","easeInOut","circIn","sin","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","K_SPLINE_TABLE_SIZE","K_SAMPLE_STEP_SIZE","FLOAT_32_SUPPORTED","Float32Array","a1","a2","getSlope","calcBezier","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","binarySubdivide","aX","aA","aB","currentX","currentT","abs","newtonRaphsonIterate","aGuessT","currentSlope","calcSampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","resolver","returnValue","createStyler","onRead","onRender","aliasMap","_c","useCache","props","state","changedValues","hasChanged","setValue","unmappedKey","currentValue","render","forceRender","get","set","CAMEL_CASE_PATTERN","REPLACE_TEMPLATE","camelToDash","str","toLowerCase","setDomAttrs","element","attrs","setAttribute","camelCache","Map","dashCache","prefixes","numPrefixes","testElement","testPrefix","document","createElement","prefix","noPrefix","prefixedPropertyName","charAt","slice","style","prefixer","asDashCase","cache","axes","order","TRANSFORM_ORIGIN_X","TRANSFORM_ORIGIN_Y","transformProps","axesAcc","axesKey","transformPropDictionary","dict","isTransformProp","sortTransformProps","isTransformOriginProp","valueTypes","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadius","width","maxWidth","height","maxHeight","top","left","bottom","right","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","transformOriginX","transformOriginY","transformOriginZ","getValueType","x","z","originX","originY","originZ","NUMBER","OBJECT","COLON","SEMI_COLON","TRANSFORM_ORIGIN","TRANSFORM","TRANSLATE_Z","TRANSFORM_NONE","styleRule","buildStylePropertyString","enableHardwareAcceleration","blacklist","valuesToChange","keys","propertyString","transformString","hasTransformOrigin","transformIsDefault","hasTransform","transformHasZ","numChangedValues","stateKey","sort","totalNumChangedValues","isTransformKey","valueType","SCROLL_LEFT","SCROLL_TOP","scrollValues","Set","cssStyler","preparseOutput","domValue","getComputedStyle","getPropertyValue","cssText","scrollLeft","scrollTop","uncachedValues","css","ZERO_NOT_ZERO","percentToPixels","percent$$1","build","dimensions","isPath","pathLength","hasDashArray","dashArrayStyles","pathSpacing","scale$$1","scaleTransformX","scaleTransformY","scaleReplaceX","scaleReplaceY","translate","defaultValue","valueTypes$1","fillOpacity","strokeOpacity","getValueType$1","svgStyler","getAttribute","background","svg","getBBox","tagName","getTotalLength","viewport","pageYOffset","pageXOffset","scrollTo","WeakMap","createDOMStyler","node","styler","HTMLElement","SVGElement","getStyler","index","nodeOrSelector","querySelector","createStylerFactory","buildStyles","styleValueTypes","isNum","isPoint","point","isPoint3D","toDecimal","num","precision","ZERO_POINT","distance1D","angle","radiansToDegrees","atan2","degreesToRadians","degrees$$1","PI","dilate","dilation","xDelta","yDelta","zDelta","sqrt","getProgressFromValue","from","to","toFromDifference","getValueFromProgress","progress","pointFromAngleAndDistance","origin","cos","radians","smooth","newValue","oldValue","duration","smoothing","speedPerFrame","xps","frameDuration","speedPerSecond","velocity","stepProgress","segment","progressOfTarget","floor","calc","freeze","identity","appendUnit","applyOffset","hasReceivedFrom","getOffset","applyOffsetTo","blend","fromExpo","toExpo","blendColor","fromColor","toColor","blended","blendFunc","blendArray","blendValue","fromThis","toThis","combineFunctions","pipe","transformers","_i","conditional","slowInterpolate","rangeLength","rangeEasing","finalIndex","reverse","progressInRange","easedProgress","fastInterpolate","minA","maxA","minB","maxB","interpolate","generateStaticSpring","alterDisplacement","constant","displacement","springModifiedDisplacement","linearSpring","nonlinearSpring","wrap","rangeSize","smooth$1","strength","previousValue","lastUpdated","currentFramestamp","timeDelta","snap","points","i_1","numPoints_1","lastDistance","distance$$1","st","transformMap","childTransformers","childTransformer","Chainable","applyMiddleware","middleware","funcs","pipedUpdate","update","while","predicate","complete","filter","Observer","observer","onComplete","_this","isActive","updateObserver","err","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","stop","init","observerProps","api","registerParent","action","BaseMulticast","subscribers","subscriber","subscribe","unsubscribe","parent","Multicast","multicast","isValueList","isArray","isSingleValue","typeOfV","ValueReaction","scheduleVelocityCheck","postRender","velocityCheck","prev","current","updateCurrent","getVelocityOfCurrent","getSingleVelocity","getListVelocity","getMapVelocity","initialSubscription","getVelocity","sub","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","updateOutput","numCompletedActions","subs","hasCompleted","methodName","composite","propKey","starter","parallel","parallel$1","createVectorTests","typeTests","testNames","isVectorProp","getVectorKeys","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","isUnitProp","Boolean","createAction","reduceArrayValue","createArrayAction","firstVectorKey","actionList","childActionProps","getActionCreator","reduceObjectValue","createObjectAction","actionMap","createUnitAction","unitType","createColorAction","createComplexAction","valueTemplate","createVectorAction","vectorAction","isVector","testKey","testProp","actionCreator","decay","_d","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","frameDelta","exp","isMoving","vectorDecay","func","initialTime","scrubber","ease","seek","vectorScrubber","clampProgress","tween","flip","loop","yoyo","_g","_h","_j","_k","playDirection","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","reverseTween","isTweenComplete","isStepTaken","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","newProgress","clampProgress$1","defaultEasings","easing$$1","defaultTimings","interpolateScrubbers","scrubbers","finalInputIndex","finalScrubberIndex","scrub","keyframes","easings","times","tweenProps","physics","acceleration","friction","springStrength","restSpeed","distanceToTarget","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","spring","stiffness","damping","mass","initialVelocity","position","prevPosition","dampingRatio","angularFreq","envelope","expoDecay","isBelowVelocityThreshold","isBelowDisplacementThreshold","vectorSpring","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","trackKeyframes","keyframeProps","listen","events","options","eventNames","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","eventToPoint","isTouchDevice","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","crossfade","balance","fadable","va","vb","setBalance","delay","timeToDelay","merge","thisAction","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","everyFrame","popmotion","require","ball","divStyler","ballXY"],"mappings":"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","file":"animation.3325878c.map","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var HEY_LISTEN = 'Hey, listen! ';\r\nvar warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(HEY_LISTEN + message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(HEY_LISTEN.toUpperCase() + message);\r\n        }\r\n    };\r\n}\n\nexport { warning, invariant };\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar isProcessing = false;\r\nvar frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar _a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = _a.steps, sync = _a.sync, cancelSync = _a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = frame.delta;\r\n    frame.timestamp = timestamp;\r\n    isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return frame; };\n\nexport default sync;\nexport { cancelSync, getFrameData };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar isFirstChars = function (term) { return function (v) {\r\n    return typeof v === 'string' && v.indexOf(term) === 0;\r\n}; };\r\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar splitCommaDelimited = function (value) {\r\n    return typeof value === 'string' ? value.split(/,\\s*/) : [value];\r\n};\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign({}, number, { transform: clamp(0, 1) });\r\nvar scale = __assign({}, number, { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\n\nvar clampRgbUnit = clamp(0, 255);\r\nvar onlyColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    var numTerms = terms.length;\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = splitCommaDelimited(getValueFromFunctionString(v));\r\n        for (var i = 0; i < numTerms; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = __assign({}, number, { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nvar testRgbaString = isFirstChars('rgb');\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? testRgbaString(v) : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, alpha$$1 = _a.alpha;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha$$1)\r\n        });\r\n    }\r\n};\r\nvar testHslaString = isFirstChars('hsl');\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? testHslaString(v) : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, alpha$$1 = _a.alpha;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha$$1)\r\n        });\r\n    }\r\n};\r\nvar hex = __assign({}, rgba, { test: isFirstChars('#'), parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && onlyColorRegex.test(v)) ||\r\n            rgba.test(v) ||\r\n            hsla.test(v) ||\r\n            hex.test(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    }\r\n};\n\nexport { number, scale, alpha, degrees, percent, px, vw, vh, rgba, rgbUnit, hex, hsla, color, complex };\n","var DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar reversed = function (easing) {\n    return function (p) {\n        return 1 - easing(1 - p);\n    };\n};\nvar mirrored = function (easing) {\n    return function (p) {\n        return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n    };\n};\nvar createReversedEasing = reversed;\nvar createMirroredEasing = mirrored;\nvar createExpoIn = function (power) {\n    return function (p) {\n        return Math.pow(p, power);\n    };\n};\nvar createBackIn = function (power) {\n    return function (p) {\n        return p * p * ((power + 1) * p - power);\n    };\n};\nvar createAnticipateEasing = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\nvar linear = function (p) {\n    return p;\n};\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\nvar circIn = function (p) {\n    return 1 - Math.sin(Math.acos(p));\n};\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\nvar a = function (a1, a2) {\n    return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\nvar b = function (a1, a2) {\n    return 3.0 * a2 - 6.0 * a1;\n};\nvar c = function (a1) {\n    return 3.0 * a1;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\nvar calcBezier = function (t, a1, a2) {\n    return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n    var binarySubdivide = function (aX, aA, aB) {\n        var i = 0;\n        var currentX;\n        var currentT;\n        do {\n            currentT = aA + (aB - aA) / 2.0;\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\n            if (currentX > 0.0) {\n                aB = currentT;\n            } else {\n                aA = currentT;\n            }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n        return currentT;\n    };\n    var newtonRaphsonIterate = function (aX, aGuessT) {\n        var i = 0;\n        var currentSlope = 0;\n        var currentX;\n        for (; i < NEWTON_ITERATIONS; ++i) {\n            currentSlope = getSlope(aGuessT, mX1, mX2);\n            if (currentSlope === 0.0) {\n                return aGuessT;\n            }\n            currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n            aGuessT -= currentX / currentSlope;\n        }\n        return aGuessT;\n    };\n    var calcSampleValues = function () {\n        for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n            sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n        }\n    };\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = K_SPLINE_TABLE_SIZE - 1;\n        var dist = 0.0;\n        var guessForT = 0.0;\n        var initialSlope = 0.0;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += K_SAMPLE_STEP_SIZE;\n        }\n        --currentSample;\n        dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n        initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT);\n        } else if (initialSlope === 0.0) {\n            return guessForT;\n        } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n        }\n    };\n    calcSampleValues();\n    var resolver = function (aX) {\n        var returnValue;\n        if (mX1 === mY1 && mX2 === mY2) {\n            returnValue = aX;\n        } else if (aX === 0) {\n            returnValue = 0;\n        } else if (aX === 1) {\n            returnValue = 1;\n        } else {\n            returnValue = calcBezier(getTForX(aX), mY1, mY2);\n        }\n        return returnValue;\n    };\n    return resolver;\n}\n\nexport { reversed, mirrored, createReversedEasing, createMirroredEasing, createExpoIn, createBackIn, createAnticipateEasing, linear, easeIn, easeOut, easeInOut, circIn, circOut, circInOut, backIn, backOut, backInOut, anticipate, cubicBezier };\n","import sync from 'framesync';\nimport { alpha, color, degrees, scale, px, percent } from 'style-value-types';\nimport { __assign } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.aliasMap,\n        aliasMap = _b === void 0 ? {} : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (props) {\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        var setValue = function (unmappedKey, value) {\n            var key = aliasMap[unmappedKey] || unmappedKey;\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] !== currentValue) {\n                if (changedValues.indexOf(key) === -1) {\n                    changedValues.push(key);\n                }\n                if (!hasChanged) {\n                    hasChanged = true;\n                    sync.render(render);\n                }\n            }\n        };\n        function render(forceRender) {\n            if (forceRender === void 0) {\n                forceRender = false;\n            }\n            if (forceRender === true || hasChanged) {\n                onRender(state, props, changedValues);\n                hasChanged = false;\n                changedValues.length = 0;\n            }\n            return this;\n        }\n        return {\n            get: function (unmappedKey) {\n                var key = aliasMap[unmappedKey] || unmappedKey;\n                return key ? useCache && state[key] !== undefined ? state[key] : onRead(key, props) : state;\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    if (value !== undefined) {\n                        setValue(values, value);\n                    } else {\n                        return function (v) {\n                            return setValue(values, v);\n                        };\n                    }\n                } else {\n                    for (var key in values) {\n                        if (values.hasOwnProperty(key)) {\n                            setValue(key, values[key]);\n                        }\n                    }\n                }\n                return this;\n            },\n            render: render\n        };\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nvar setDomAttrs = function (element, attrs) {\n    for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n            element.setAttribute(key, attrs[key]);\n        }\n    }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar testElement;\nvar testPrefix = function (key) {\n    if (typeof document === 'undefined') return;\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style) {\n            camelCache.set(key, prefixedPropertyName);\n            dashCache.set(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) testPrefix(key);\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar TRANSFORM_ORIGIN_X = 'transformOriginX';\nvar TRANSFORM_ORIGIN_Y = 'transformOriginY';\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nvar isTransformProp = function (key) {\n    return transformPropDictionary[key] === true;\n};\nvar sortTransformProps = function (a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n};\nvar isTransformOriginProp = function (key) {\n    return key === TRANSFORM_ORIGIN_X || key === TRANSFORM_ORIGIN_Y;\n};\n\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    top: px,\n    left: px,\n    bottom: px,\n    right: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    perspective: px,\n    opacity: alpha,\n    transformOriginX: percent,\n    transformOriginY: percent,\n    transformOriginZ: px\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\n\nvar aliasMap = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ',\n    originX: 'transformOriginX',\n    originY: 'transformOriginY',\n    originZ: 'transformOriginZ'\n};\nvar NUMBER = 'number';\nvar OBJECT = 'object';\nvar COLON = ':';\nvar SEMI_COLON = ';';\nvar TRANSFORM_ORIGIN = 'transform-origin';\nvar TRANSFORM = 'transform';\nvar TRANSLATE_Z = 'translateZ';\nvar TRANSFORM_NONE = ';transform: none';\nvar styleRule = function (key, value) {\n    return \"\" + SEMI_COLON + key + COLON + value;\n};\nfunction buildStylePropertyString(state, changedValues, enableHardwareAcceleration, blacklist) {\n    if (changedValues === void 0) {\n        changedValues = true;\n    }\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    var valuesToChange = changedValues === true ? Object.keys(state) : changedValues;\n    var propertyString = '';\n    var transformString = '';\n    var hasTransformOrigin = false;\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var transformHasZ = false;\n    var numChangedValues = valuesToChange.length;\n    for (var i = 0; i < numChangedValues; i++) {\n        var key = valuesToChange[i];\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            for (var stateKey in state) {\n                if (isTransformProp(stateKey) && valuesToChange.indexOf(stateKey) === -1) {\n                    valuesToChange.push(stateKey);\n                }\n            }\n            break;\n        }\n    }\n    valuesToChange.sort(sortTransformProps);\n    var totalNumChangedValues = valuesToChange.length;\n    for (var i = 0; i < totalNumChangedValues; i++) {\n        var key = valuesToChange[i];\n        if (blacklist.has(key)) continue;\n        var isTransformKey = isTransformProp(key);\n        var value = state[key];\n        var valueType = getValueType(key);\n        if (isTransformKey) {\n            if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                transformIsDefault = false;\n            }\n        }\n        if (valueType && (typeof value === NUMBER || typeof value === OBJECT) && valueType.transform) {\n            value = valueType.transform(value);\n        }\n        if (isTransformKey) {\n            transformString += key + '(' + value + ') ';\n            transformHasZ = key === TRANSLATE_Z ? true : transformHasZ;\n        } else if (isTransformOriginProp(key)) {\n            state[key] = value;\n            hasTransformOrigin = true;\n        } else {\n            propertyString += styleRule(prefixer(key, true), value);\n        }\n    }\n    if (hasTransformOrigin) {\n        propertyString += styleRule(TRANSFORM_ORIGIN, (state.transformOriginX || 0) + \" \" + (state.transformOriginY || 0) + \" \" + (state.transformOriginZ || 0));\n    }\n    if (hasTransform) {\n        if (!transformHasZ && enableHardwareAcceleration) {\n            transformString += TRANSLATE_Z + \"(0)\";\n        }\n        propertyString += styleRule(TRANSFORM, transformIsDefault ? TRANSFORM_NONE : transformString);\n    }\n    return propertyString;\n}\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollValues = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element,\n            preparseOutput = _a.preparseOutput;\n        var valueType = getValueType(key);\n        if (isTransformProp(key)) {\n            return valueType ? valueType.default || 0 : 0;\n        } else if (scrollValues.has(key)) {\n            return element[key];\n        } else {\n            var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n            return preparseOutput && valueType && valueType.parse ? valueType.parse(domValue) : domValue;\n        }\n    },\n    onRender: function (state, _a, changedValues) {\n        var element = _a.element,\n            enableHardwareAcceleration = _a.enableHardwareAcceleration;\n        element.style.cssText += buildStylePropertyString(state, changedValues, enableHardwareAcceleration, scrollValues);\n        if (changedValues.indexOf(SCROLL_LEFT) !== -1) element.scrollLeft = state.scrollLeft;\n        if (changedValues.indexOf(SCROLL_TOP) !== -1) element.scrollTop = state.scrollTop;\n    },\n    aliasMap: aliasMap,\n    uncachedValues: scrollValues\n});\nvar css = function (element, props) {\n    return cssStyler(__assign({ element: element, enableHardwareAcceleration: true, preparseOutput: true }, props));\n};\n\nvar ZERO_NOT_ZERO = 0.0000001;\nvar percentToPixels = function (percent$$1, length) {\n    return percent$$1 / 100 * length + 'px';\n};\nvar build = function (state, dimensions, isPath, pathLength) {\n    var hasTransform = false;\n    var hasDashArray = false;\n    var props = {};\n    var dashArrayStyles = isPath ? {\n        pathLength: '0',\n        pathSpacing: \"\" + pathLength\n    } : undefined;\n    var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n    var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n    var transformOriginX = dimensions.width * ((state.originX || 50) / 100) + dimensions.x;\n    var transformOriginY = dimensions.height * ((state.originY || 50) / 100) + dimensions.y;\n    var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n    var scaleTransformY = -transformOriginY * (scaleY * 1);\n    var scaleReplaceX = transformOriginX / scale$$1;\n    var scaleReplaceY = transformOriginY / scaleY;\n    var transform = {\n        translate: \"translate(\" + state.translateX + \", \" + state.translateY + \") \",\n        scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n        rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n        skewX: \"skewX(\" + state.skewX + \") \",\n        skewY: \"skewY(\" + state.skewY + \") \"\n    };\n    for (var key in state) {\n        if (state.hasOwnProperty(key)) {\n            var value = state[key];\n            if (isTransformProp(key)) {\n                hasTransform = true;\n            } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n                hasDashArray = true;\n                dashArrayStyles[key] = percentToPixels(value, pathLength);\n            } else if (isPath && key === 'pathOffset') {\n                props['stroke-dashoffset'] = percentToPixels(-value, pathLength);\n            } else {\n                props[camelToDash(key)] = value;\n            }\n        }\n    }\n    if (hasDashArray) {\n        props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n    }\n    if (hasTransform) {\n        props.transform = '';\n        for (var key in transform) {\n            if (transform.hasOwnProperty(key)) {\n                var defaultValue = key === 'scale' ? '1' : '0';\n                props.transform += transform[key].replace(/undefined/g, defaultValue);\n            }\n        }\n    }\n    return props;\n};\n\nvar valueTypes$1 = {\n    fill: color,\n    stroke: color,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    opacity: alpha,\n    fillOpacity: alpha,\n    strokeOpacity: alpha\n};\nvar getValueType$1 = function (key) {\n    return valueTypes$1[key];\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType$1(key);\n            return valueType ? valueType.default : 0;\n        }\n    },\n    onRender: function (state, _a, changedValues) {\n        var dimensions = _a.dimensions,\n            element = _a.element,\n            isPath = _a.isPath,\n            pathLength = _a.pathLength;\n        setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n    },\n    aliasMap: {\n        x: 'translateX',\n        y: 'translateY',\n        background: 'fill'\n    }\n});\nvar svg = function (element) {\n    var _a = element.getBBox(),\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n    var props = {\n        element: element,\n        dimensions: { x: x, y: y, width: width, height: height },\n        isPath: false\n    };\n    if (element.tagName === 'path') {\n        props.isPath = true;\n        props.pathLength = element.getTotalLength();\n    }\n    return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node instanceof HTMLElement) {\n        styler = css(node, props);\n    } else if (node instanceof SVGElement) {\n        styler = svg(node);\n    } else if (typeof window !== 'undefined' && node === window) {\n        styler = viewport(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { createStyler as createStylerFactory, buildStylePropertyString as buildStyles };\n","import { __rest, __extends, __assign } from 'tslib';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport * as styleValueTypes from 'style-value-types';\nimport { color, hsla, complex, percent, degrees, vh, vw, px, number } from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport { invariant, warning } from 'hey-listen';\nimport * as easing from '@popmotion/easing';\nimport { linear, easeOut, easeInOut } from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\n\nvar isNum = function (v) {\n    return typeof v === 'number';\n};\nvar isPoint = function (point) {\n    return point.x !== undefined && point.y !== undefined;\n};\nvar isPoint3D = function (point) {\n    return point.z !== undefined;\n};\nvar toDecimal = function (num, precision) {\n    if (precision === void 0) {\n        precision = 2;\n    }\n    precision = Math.pow(10, precision);\n    return Math.round(num * precision) / precision;\n};\nvar ZERO_POINT = {\n    x: 0,\n    y: 0,\n    z: 0\n};\nvar distance1D = function (a, b) {\n    return Math.abs(a - b);\n};\nvar angle = function (a, b) {\n    if (b === void 0) {\n        b = ZERO_POINT;\n    }\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\n};\nvar degreesToRadians = function (degrees$$1) {\n    return degrees$$1 * Math.PI / 180;\n};\nvar dilate = function (a, b, dilation) {\n    return a + (b - a) * dilation;\n};\nvar distance = function (a, b) {\n    if (b === void 0) {\n        b = ZERO_POINT;\n    }\n    if (isNum(a) && isNum(b)) {\n        return distance1D(a, b);\n    } else if (isPoint(a) && isPoint(b)) {\n        var xDelta = distance1D(a.x, b.x);\n        var yDelta = distance1D(a.y, b.y);\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n    }\n    return 0;\n};\nvar getProgressFromValue = function (from, to, value) {\n    var toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\nvar getValueFromProgress = function (from, to, progress) {\n    return -progress * from + progress * to + from;\n};\nvar pointFromAngleAndDistance = function (origin, angle, distance) {\n    angle = degreesToRadians(angle);\n    return {\n        x: distance * Math.cos(angle) + origin.x,\n        y: distance * Math.sin(angle) + origin.y\n    };\n};\nvar radiansToDegrees = function (radians) {\n    return radians * 180 / Math.PI;\n};\nvar smooth = function (newValue, oldValue, duration, smoothing) {\n    if (smoothing === void 0) {\n        smoothing = 0;\n    }\n    return toDecimal(oldValue + duration * (newValue - oldValue) / Math.max(smoothing, duration));\n};\nvar speedPerFrame = function (xps, frameDuration) {\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\n};\nvar speedPerSecond = function (velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n};\nvar stepProgress = function (steps, progress) {\n    var segment = 1 / (steps - 1);\n    var target = 1 - 1 / steps;\n    var progressOfTarget = Math.min(progress / target, 1);\n    return Math.floor(progressOfTarget / segment) * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    isPoint: isPoint,\n    isPoint3D: isPoint3D,\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    dilate: dilate,\n    distance: distance,\n    getProgressFromValue: getProgressFromValue,\n    getValueFromProgress: getValueFromProgress,\n    pointFromAngleAndDistance: pointFromAngleAndDistance,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smooth,\n    speedPerFrame: speedPerFrame,\n    speedPerSecond: speedPerSecond,\n    stepProgress: stepProgress\n});\n\nvar identity = function (v) {\n    return v;\n};\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar applyOffset = function (from, to) {\n    var hasReceivedFrom = true;\n    if (to === undefined) {\n        to = from;\n        hasReceivedFrom = false;\n    }\n    var getOffset = function (v) {\n        return v - from;\n    };\n    var applyOffsetTo = function (v) {\n        return v + to;\n    };\n    return function (v) {\n        if (hasReceivedFrom) {\n            return applyOffsetTo(getOffset(v));\n        } else {\n            from = v;\n            hasReceivedFrom = true;\n            return to;\n        }\n    };\n};\nvar blend = function (from, to, v) {\n    var fromExpo = from * from;\n    var toExpo = to * to;\n    return Math.sqrt(v * (toExpo - fromExpo) + fromExpo);\n};\nvar blendColor = function (from, to) {\n    var fromColor = typeof from === 'string' ? color.parse(from) : from;\n    var toColor = typeof to === 'string' ? color.parse(to) : to;\n    var blended = __assign({}, fromColor);\n    var blendFunc = from.hue !== undefined || typeof from === 'string' && hsla.test(from) ? getValueFromProgress : blend;\n    return function (v) {\n        blended = __assign({}, blended);\n        for (var key in blended) {\n            if (key !== 'alpha' && blended.hasOwnProperty(key)) {\n                blended[key] = blendFunc(fromColor[key], toColor[key], v);\n            }\n        }\n        blended.alpha = getValueFromProgress(fromColor.alpha, toColor.alpha, v);\n        return blended;\n    };\n};\nvar blendArray = function (from, to) {\n    var output = from.slice();\n    var numValues = output.length;\n    var blendValue = from.map(function (fromThis, i) {\n        var toThis = to[i];\n        return typeof fromThis === 'number' ? function (v) {\n            return getValueFromProgress(fromThis, toThis, v);\n        } : blendColor(fromThis, toThis);\n    });\n    return function (v) {\n        for (var i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nvar clamp = function (min, max) {\n    return function (v) {\n        return Math.min(Math.max(v, min), max);\n    };\n};\nvar combineFunctions = function (a, b) {\n    return function (v) {\n        return b(a(v));\n    };\n};\nvar pipe = function () {\n    var transformers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        transformers[_i] = arguments[_i];\n    }\n    return transformers.reduce(combineFunctions);\n};\nvar conditional = function (check, apply) {\n    return function (v) {\n        return check(v) ? apply(v) : v;\n    };\n};\nvar slowInterpolate = function (input, output, rangeLength, rangeEasing) {\n    var finalIndex = rangeLength - 1;\n    if (input[0] > input[finalIndex]) {\n        input.reverse();\n        output.reverse();\n    }\n    return function (v) {\n        if (v <= input[0]) {\n            return output[0];\n        }\n        if (v >= input[finalIndex]) {\n            return output[finalIndex];\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalIndex) {\n                break;\n            }\n        }\n        var progressInRange = getProgressFromValue(input[i - 1], input[i], v);\n        var easedProgress = rangeEasing ? rangeEasing[i - 1](progressInRange) : progressInRange;\n        return getValueFromProgress(output[i - 1], output[i], easedProgress);\n    };\n};\nvar fastInterpolate = function (minA, maxA, minB, maxB) {\n    return function (v) {\n        return (v - minA) * (maxB - minB) / (maxA - minA) + minB;\n    };\n};\nvar interpolate = function (input, output, rangeEasing) {\n    var rangeLength = input.length;\n    return rangeLength !== 2 ? slowInterpolate(input, output, rangeLength, rangeEasing) : fastInterpolate(input[0], input[1], output[0], output[1]);\n};\nvar generateStaticSpring = function (alterDisplacement) {\n    if (alterDisplacement === void 0) {\n        alterDisplacement = identity;\n    }\n    return function (constant, origin) {\n        return function (v) {\n            var displacement = origin - v;\n            var springModifiedDisplacement = -constant * (0 - alterDisplacement(Math.abs(displacement)));\n            return displacement <= 0 ? origin + springModifiedDisplacement : origin - springModifiedDisplacement;\n        };\n    };\n};\nvar linearSpring = /*#__PURE__*/generateStaticSpring();\nvar nonlinearSpring = /*#__PURE__*/generateStaticSpring(Math.sqrt);\nvar wrap = function (min, max) {\n    return function (v) {\n        var rangeSize = max - min;\n        return ((v - min) % rangeSize + rangeSize) % rangeSize + min;\n    };\n};\nvar smooth$1 = function (strength) {\n    if (strength === void 0) {\n        strength = 50;\n    }\n    var previousValue = 0;\n    var lastUpdated = 0;\n    return function (v) {\n        var currentFramestamp = getFrameData().timestamp;\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\n        var newValue = timeDelta ? smooth(v, previousValue, timeDelta, strength) : previousValue;\n        lastUpdated = currentFramestamp;\n        previousValue = newValue;\n        return newValue;\n    };\n};\nvar snap = function (points) {\n    if (typeof points === 'number') {\n        return function (v) {\n            return Math.round(v / points) * points;\n        };\n    } else {\n        var i_1 = 0;\n        var numPoints_1 = points.length;\n        return function (v) {\n            var lastDistance = Math.abs(points[0] - v);\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\n                var point = points[i_1];\n                var distance$$1 = Math.abs(point - v);\n                if (distance$$1 === 0) return point;\n                if (distance$$1 > lastDistance) return points[i_1 - 1];\n                if (i_1 === numPoints_1 - 1) return point;\n                lastDistance = distance$$1;\n            }\n        };\n    }\n};\nvar steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var progress = getProgressFromValue(min, max, v);\n        return getValueFromProgress(min, max, stepProgress(st, progress));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    appendUnit: appendUnit,\n    applyOffset: applyOffset,\n    blendColor: blendColor,\n    blendArray: blendArray,\n    clamp: clamp,\n    pipe: pipe,\n    conditional: conditional,\n    interpolate: interpolate,\n    generateStaticSpring: generateStaticSpring,\n    linearSpring: linearSpring,\n    nonlinearSpring: nonlinearSpring,\n    wrap: wrap,\n    smooth: smooth$1,\n    snap: snap,\n    steps: steps,\n    transformMap: transformMap\n});\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? speedPerSecond(current - prev, this.timeDelta) : speedPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createColorAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    return action(__assign({}, props, { from: 0, to: 1 })).pipe(blendColor(from, to), color.transform);\n};\nvar createComplexAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var valueTemplate = complex.createTransformer(from);\n    invariant(valueTemplate(from) === complex.createTransformer(to)(from), \"Values '\" + from + \"' and '\" + to + \"' are of different format, or a value might have changed value type.\");\n    return action(__assign({}, props, { from: 0, to: 1 })).pipe(blendArray(complex.parse(from), complex.parse(to)), valueTemplate);\n};\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    var actionCreator = createAction;\n    if (typeof prop === 'number') {\n        actionCreator = createAction;\n    } else if (Array.isArray(prop)) {\n        actionCreator = createArrayAction;\n    } else if (isUnitProp(prop)) {\n        actionCreator = createUnitAction;\n    } else if (color.test(prop)) {\n        actionCreator = createColorAction;\n    } else if (complex.test(prop)) {\n        actionCreator = createComplexAction;\n    } else if (typeof prop === 'object') {\n        actionCreator = createObjectAction;\n    }\n    return actionCreator;\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d;\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress) {\n                return update(progress);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return getValueFromProgress(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f;\n        var _g = props.from,\n            from = _g === void 0 ? 0 : _g,\n            _h = props.to,\n            to = _h === void 0 ? 1 : _h,\n            _j = props.elapsed,\n            elapsed = _j === void 0 ? 0 : _j,\n            _k = props.playDirection,\n            playDirection = _k === void 0 ? 1 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var progress = 0;\n        var process;\n        var isActive = false;\n        var reverseTween = function () {\n            return playDirection *= -1;\n        };\n        var isTweenComplete = function () {\n            var _a;\n            var isComplete = playDirection === 1 ? isActive && elapsed >= duration : isActive && elapsed <= 0;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            var isStepTaken = false;\n            if (loop && loopCount < loop) {\n                elapsed = 0;\n                loopCount++;\n                isStepTaken = true;\n            } else if (flip && flipCount < flip) {\n                elapsed = duration - elapsed;\n                _a = [to, from], from = _a[0], to = _a[1];\n                playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n                flipCount++;\n                isStepTaken = true;\n            } else if (yoyo && yoyoCount < yoyo) {\n                reverseTween();\n                yoyoCount++;\n                isStepTaken = true;\n            }\n            return !isStepTaken;\n        };\n        var updateTween = function () {\n            progress = clampProgress(getProgressFromValue(0, duration, elapsed));\n            playhead.seek(progress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta * playDirection;\n                updateTween();\n                if (isTweenComplete() && complete) {\n                    cancelSync.update(process);\n                    sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration)(elapsed);\n            },\n            getProgress: function () {\n                return progress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = getValueFromProgress(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseTween();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = getProgressFromValue(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += speedPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * speedPerFrame(springStrength, elapsed);\n            }\n            current += speedPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = speedPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(getValueFromProgress(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return styler(element, props);\n};\nvar svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return styler(element, props);\n};\n\nexport { action, multicast, value, vectorDecay as decay, keyframes, frame as everyFrame, vectorPhysics as physics, vectorSpring as spring, timeline, tween, listen, index as pointer, mouse, multitouch, chain, composite, crossfade, delay, merge, parallel$1 as parallel, schedule, stagger, calc, transformers as transform, css, svg, Action, ValueReaction };\n","const popmotion = require('popmotion');\n\nconst { styler, spring, listen, pointer, value } = popmotion;\n\nconst ball = document.querySelector('.box');\nconst divStyler = styler(ball);\nconst ballXY = value({ x: 0, y: 0 }, divStyler.set);\n\nlisten(ball, 'mousedown touchstart').start(e => {\n  e.preventDefault();\n  pointer(ballXY.get()).start(ballXY);\n});\n\nlisten(document, 'mouseup touchend').start(() => {\n  spring({\n    from: ballXY.get(),\n    velocity: ballXY.getVelocity(),\n    to: { x: 0, y: 0 },\n    stiffness: 200\n    // mass: 1,\n    // damping: 10\n  }).start(ballXY);\n});\n"]}